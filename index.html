<!doctype html>
<html lang="en" ng-app="Contacts" ng-cloak>

<head>
  <title>Contacts</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <link rel='icon' href='data:;base64,iVBORw0KGgo='>

  <link rel="stylesheet" href="bower_components/lumx/dist/lumx.css">
  <link rel="stylesheet" href="bower_components/mdi/css/materialdesignicons.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="shortcut icon" type="img/png" href="images/favicon.png">
</head>

<body ng-controller="Main">
  <div class="row">
    <div class="toolbar bgc-indigo-500" flex-container="row">
      <div class="toolbar__left mr">
        <button class="btn btn--l btn--black btn--icon" lx-ripple aria-label="Add new contact" lx-tooltip="Add contact" tooltip-position="bottom" ng-click="opendAddDialog()">
          <span class="mdi mdi-account-plus tc-white-1"></span>
        </button>
      </div>

      <div class="toolbar__left" aria-label="Filter contacts" lx-tooltip="Filter contacts" tooltip-position="bottom">
        <lx-search-filter closed theme="dark" filter-width="100%" placeholder="Filter contacts" model="filterContacts"></lx-search-filter>
      </div>

      <div class="toolbar__right toolbar__label" ng-if="loggedIn">
        <div class="toolbar__right fs-title mr" ng-show="loggedIn" lx-tooltip="{{my.name}}" tooltip-position="bottom">
          <img class="mr" ng-show="my.picture" ng-src="{{my.picture}}" alt="Photo of {{my.name}}"/>
          <img class="mr" ng-hide="my.picture" src="images/generic_photo.png" alt="Photo of user" />
        </div>
        <lx-dropdown position="right" from-top>
          <button class="btn btn--l btn--black btn--icon" lx-ripple lx-dropdown-toggle aria-label="Menu">
            <span class="mdi mdi-dots-vertical tc-white-1"></span>
          </button>
          <lx-dropdown-menu>
            <ul>
              <li><a class="dropdown-link"><span class="mdi mdi-cloud-download mr"></span>Import vCards</a></li>
              <li><a class="dropdown-link"><span class="mdi mdi-cloud-upload mr"></span>Export vCards</a></li>
              <li><a class="dropdown-link"><span class="mdi mdi-settings mr"></span>Preferences</a></li>
              <li class="dropdown-divider"></li>
              <li><a class="dropdown-link" ng-click="logOut()"><span class="mdi mdi-exit-to-app mr"></span>Logout</a></li>
            </ul>
          </lx-dropdown-menu>
        </lx-dropdown>
      </div>

      <div class="toolbar__right toolbar__label" ng-if="!loggedIn">
        <span class="fs-title tc-white-1">Login</span>
        <button class="btn btn--l btn--black btn--icon" ng-click="viewLogin()" aria-label="Login" lx-ripple lx-tooltip="Login" tooltip-position="bottom">
          <span class="mdi mdi-login tc-white-1"></span>
        </button>
      </div>
    </div>
  </div>

  <div class="toolbar bgc-blue-100 tc-grey-800" ng-if="selectedContacts.length > 0">
    <div class="toolbar__left toolbar__label mr">
      <span>{{selectedContacts.length}} selected</span>
      <lx-dropdown>
        <button class="btn btn--l btn--black btn--icon" lx-ripple lx-dropdown-toggle aria-label="Selection menu">
          <span class="mdi mdi-chevron-down tc-grey-800"></span>
        </button>
        <lx-dropdown-menu>
          <ul>
            <li><a class="dropdown-link" ng-click="selectAll()"><span class="mdi mdi-checkbox-marked-outline mr"></span>select all</a></li>
            <li><a class="dropdown-link" ng-click="selectNone()"><span class="mdi mdi-checkbox-blank-outline mr"></span>select none</a></li>
          </ul>
        </lx-dropdown-menu>
      </lx-dropdown>
    </div>
    <div class="toolbar__right">
      <button class="btn btn--l btn--black btn--icon" lx-ripple aria-label="Merge contacts" lx-tooltip="Merge" tooltip-position="bottom" ng-click="mergeSelected()">
        <span class="mdi mdi-account-multiple tc-grey-800"></span>
      </button>
      <button class="btn btn--l btn--black btn--icon" lx-ripple aria-label="Delete contacts" lx-tooltip="Delete" tooltip-position="bottom" ng-click="deleteSelected()">
        <span class="mdi mdi-delete tc-grey-800"></span>
      </button>
    </div>
    <div class="toolbar__right">
      <lx-dropdown position="right" from-top>
        <button class="btn btn--l btn--black btn--icon" lx-ripple lx-dropdown-toggle aria-label="Multiple contacts menu">
          <span class="mdi mdi-dots-vertical tc-grey-800"></span>
        </button>
        <lx-dropdown-menu>
          <ul>
            <li><a class="dropdown-link"><span class="mdi mdi-cloud-upload mr"></span>Export vCards</a></li>
            <li><a class="dropdown-link"><span class="mdi mdi-account-multiple-plus mr"></span>Add to group</a></li>
          </ul>
        </lx-dropdown-menu>
      </lx-dropdown>
    </div>
  </div>


  <div class="contacts">
    <div class="row contact mb" ng-repeat="contact in contacts|filter: filterContacts">
      <div class="card list-row list-row--multi-line" ng-class="{ 'bgc-blue-100':contact.checked }" ng-mouseenter="hoverContact($index, true)" ng-mouseleave="hoverContact($index, false)">
        <div class="list-row__primary">
          <button class="btn btn--l btn--black btn--icon" lx-ripple aria-label="Toggle favorite" lx-tooltip="Toggle favorite" tooltip-position="bottom">
            <span class="icon icon--l icon--flat mdi" ng-class="contact.favorite == 'favorite'?['icon--green', 'mdi-star']:['icon--grey', 'mdi-star-outline']"></span>
          </button>
        </div>
        <div class="list-row__primary">
          <div ng-show="contact.showcheckbox">
            <div class="checkbox">
              <input type="checkbox" id="cb-{{$index}}" class="checkbox__input" ng-model="contact.checked" ng-click="manageSelection($index)">
              <label for="cb-{{$index}}" class="checkbox__label"></label>
            </div>
          </div>
          <div ng-hide="contact.hidepic">
            <img ng-show="contact.picture" ng-src="{{contact.picture}}" alt="Photo of {{contact.name}}" width="40" height="40" class="img-round">
            <img ng-hide="contact.picture" src="images/generic_photo.png" alt="Photo of {{contact.name}}" width="40" height="40" class="img-round" />
          </div>
        </div>

        <div class="list-row__content">
            <div class="display-block">
              {{contact.name}}
            </div>
            <div class="display-block fs-body-1 tc-black-2">
              <a href="mailto:{{contact.email}}">{{contact.email}}</a>
            </div>
            <div class="display-block fs-body-1 tc-black-2">
              {{contact.phone}}
            </div>
        </div>

        <div class="list-row__secondary">
          <button class="btn btn--l btn--black btn--icon" lx-ripple aria-label="More contact info" lx-tooltip="Show more" tooltip-position="bottom">
            <span class="icon icon--s icon--grey icon--flat mdi mdi-chevron-double-down"></span>
          </button>
        </div>
      </div>
      <!-- More info -->
      <div class="more">
        
      </div>
    </div>
  </div>


  <lx-dialog class="dialog dialog--l" id="addcontact">
    <div class="dialog__header">
      <div class="toolbar bgc-light-blue-500 pl++">
        <span class="toolbar__label tc-white fs-title">
          Add new contact
        </span>
      </div>
    </div>
    <div class="dialog__content">
        
    </div>
    <div class="dialog__actions">
        <button class="btn btn--m btn--black btn--flat" lx-ripple lx-dialog-close>Cancel</button>
        <button class="btn btn--m btn--black btn--flat" lx-ripple>Add</button>
    </div>
  </lx-dialog>

  <!-- Deps -->
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/velocity/velocity.min.js"></script>
  <script src="bower_components/angular/angular.min.js"></script>
  <script src="bower_components/lumx/dist/lumx.min.js"></script>
  <script src="vendor/rdflib.min.js"></script>
  <!-- App -->
  <script src="app/app.js"></script>
</body>

</html>